{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"DefaultActionDto":{"type":"object","properties":{"enabled":{"type":["boolean","null"]},"name":{"type":["string","null"]}},"additionalProperties":false},"ExpertSettingsDto-nullable":{"type":["object","null"],"properties":{"apache":{"type":["string","null"]},"security_gate":{"type":["string","null"]}},"additionalProperties":false},"PatternDto-nullable":{"type":["object","null"],"properties":{"ignore_case":{"type":"boolean","default":"true"},"inverted":{"type":"boolean","default":"false"},"pattern":{"type":"string"}},"required":["pattern"],"additionalProperties":false},"PatternWithRewriteDto-nullable":{"type":["object","null"],"properties":{"regex":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"substitution":{"type":["string","null"]}},"additionalProperties":false},"PatternWithoutInvertDto":{"type":"object","properties":{"ignore_case":{"type":"boolean","default":"true"},"pattern":{"type":"string"}},"required":["pattern"],"additionalProperties":false},"PatternWithoutInvertDto-nullable":{"anyOf":[{"type":"null"},{"$ref":"#/definitions/PatternWithoutInvertDto"}]},"RemoveHeaderActionDto-nullable":{"type":["object","null"],"properties":{"name":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"value":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]}},"additionalProperties":false},"RewriteHeaderValueDto-nullable":{"type":["object","null"],"properties":{"name":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"replace":{"type":["string","null"]},"value":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]}},"additionalProperties":false},"SimpleHeaderActionDto-nullable":{"type":["object","null"],"properties":{"name":{"type":["string","null"]},"value":{"type":["string","null"]}},"additionalProperties":false},"SimplePatternDto-nullable":{"type":["object","null"],"properties":{"pattern":{"type":["string","null"]}},"additionalProperties":false}},"type":"object","properties":{"apps":{"type":"array","items":{"type":"object","properties":{"mappings":{"type":"array","items":{"type":"object","properties":{"access_token":{"type":["object","null"],"properties":{"audittoken":{"type":["boolean","null"],"default":"false"},"claims":{"type":"array","items":{"type":"object","properties":{"claim":{"type":["string","null"]},"regex":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]}},"additionalProperties":false}},"expiry_checked":{"type":["boolean","null"],"default":"false"},"extraction":{"type":["object","null"],"properties":{"cookie":{"type":["string","null"]},"header":{"allOf":[{"$ref":"#/definitions/PatternWithRewriteDto-nullable"},true]},"mode":{"type":["string","null"],"enum":["header","parameter","cookie"],"default":"header"},"parameter":{"type":["string","null"]}},"additionalProperties":false},"jwks_providers":{"type":"array","items":{"type":"string"}},"mandatory":{"type":["boolean","null"],"default":"false"},"roles":{"type":"array","items":{"type":"object","properties":{"claim":{"type":["string","null"]},"extraction":{"allOf":[{"$ref":"#/definitions/PatternWithRewriteDto-nullable"},true]},"token_lifetime":{"type":["boolean","null"],"default":"false"}},"additionalProperties":false}},"signature_mandatory":{"type":["boolean","null"],"default":"true"},"skew":{"type":["integer","null"],"default":"10"},"tech_client_id_claim":{"type":["string","null"]}},"additionalProperties":false},"allow_rules":{"type":"array","items":{"type":"object","properties":{"content_type":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"enabled":{"type":"boolean","default":"true"},"log_only":{"type":"boolean","default":"false"},"method":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"name":{"type":"string","default":"Allow all"},"path":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]}},"additionalProperties":false}},"api_security":{"type":["object","null"],"properties":{"json_content_type":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},{"default":"json"}]},"openapi":{"type":["object","null"],"properties":{"log_only":{"type":["boolean","null"],"default":"false"},"path_matching":{"type":["string","null"],"enum":["client_view","backend_view"],"default":"client_view"},"response_validation":{"type":["boolean","null"],"default":"false"},"spec":{"type":["string","null"]},"spec_file":{"type":["string","null"],"default":"/config/openapi.json"}},"additionalProperties":false},"treat_json_objects_as_parameters":{"type":["boolean","null"],"default":"true"},"treat_path_segments_as_parameters":{"type":["boolean","null"],"default":"true"}},"additionalProperties":false},"auth":{"type":["object","null"],"properties":{"access":{"type":"array","items":{"type":"object","properties":{"method":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"path":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"roles":{"type":"array","items":{"type":"string"}}},"additionalProperties":false}},"client_certificate":{"type":["object","null"],"properties":{"verification":{"type":"string","enum":["inherit","optional","required"],"default":"inherit"}},"additionalProperties":false},"denied_access_url":{"type":["string","null"],"default":"/auth/check-login"},"flow":{"type":["string","null"],"enum":["redirect","deny_access","one_shot","one_shot_with_body","ntlm"],"default":"redirect"},"logout_propagation_path":{"type":["string","null"]}},"additionalProperties":false},"backend":{"type":["object","null"],"properties":{"expert_settings":{"type":["object","null"],"properties":{"security_gate":{"type":["string","null"]}},"additionalProperties":false},"hosts":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","default":"backend","pattern":"^[A-Za-z0-9.\\-_:]+$"},"port":{"type":"integer","default":"8080","minimum":1,"maximum":65535},"protocol":{"type":"string","enum":["https","http"],"default":"http"}},"additionalProperties":false}},"name":{"type":"string","default":"backendGroup","pattern":"^[A-Za-z0-9.\\-_:]+$"}},"additionalProperties":false},"backend_path":{"type":["string","null"],"default":"/"},"compress_response_traffic":{"type":["boolean","null"],"default":"false"},"control_api":{"type":["boolean","null"],"default":"false"},"cookies":{"type":["object","null"],"properties":{"encrypted":{"allOf":[{"$ref":"#/definitions/SimplePatternDto-nullable"},true]},"passthrough":{"allOf":[{"$ref":"#/definitions/SimplePatternDto-nullable"},true]}},"additionalProperties":false},"csrf_token":{"type":["object","null"],"properties":{"enabled":{"type":["boolean","null"],"default":"false"},"exceptions":{"type":["array","null"],"items":{"type":"object","properties":{"path":{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"}},"additionalProperties":false}},"invalid_token_redirect_location":{"type":["string","null"],"default":"/%ENTRYPATH%"}},"additionalProperties":false},"deny_rule_groups":{"type":"array","items":{"type":"object","properties":{"enabled":{"type":["boolean","null"],"default":"true"},"exceptions":{"type":"array","items":{"type":"object","properties":{"content_type":{"$ref":"#/definitions/PatternDto-nullable"},"header_name":{"$ref":"#/definitions/PatternDto-nullable"},"header_value":{"$ref":"#/definitions/PatternDto-nullable"},"method":{"$ref":"#/definitions/PatternDto-nullable"},"parameter_name":{"$ref":"#/definitions/PatternDto-nullable"},"parameter_value":{"$ref":"#/definitions/PatternDto-nullable"},"path":{"$ref":"#/definitions/PatternDto-nullable"}},"additionalProperties":false}},"level":{"type":["string","null"],"enum":["basic","standard","strict"],"default":"standard"},"log_only":{"type":["boolean","null"],"default":"false"},"rule_group_keys":{"type":"array","items":{"type":"string"}}},"additionalProperties":false}},"entry_path":{"type":["object","null"],"properties":{"enforce_trailing_slashes":{"type":["boolean","null"],"default":"false"},"value":{"type":["string","null"],"default":"/"}},"additionalProperties":false},"env_cookies":{"type":["boolean","null"],"default":"false"},"expert_settings":{"$ref":"#/definitions/ExpertSettingsDto-nullable"},"limits":{"type":["object","null"],"properties":{"http_limits":{"type":["object","null"],"properties":{"max_parameter_name_length":{"type":["integer","null"],"default":"128"},"max_parameter_value_length":{"type":["integer","null"],"default":"1024"},"max_parameters":{"type":["integer","null"],"default":"128"},"parameter_length_exception":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]}},"additionalProperties":false},"json_limits":{"type":["object","null"],"properties":{"max_array_items":{"type":["integer","null"],"default":"500"},"max_key_length":{"type":["integer","null"],"default":"256"},"max_keys":{"type":["integer","null"],"default":"250"},"max_length_exception":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"max_nesting_depth":{"type":["integer","null"],"default":"100"},"max_total_entries":{"type":["integer","null"],"default":"150000"},"max_value_length":{"type":["integer","null"],"default":"8192"}},"additionalProperties":false},"max_path_length":{"type":["integer","null"],"default":"1024"},"max_request_body_size":{"type":["integer","null"],"default":"104857600"}},"additionalProperties":false},"mapping_template_file":{"type":["string","null"],"default":"/config/mapping.xml"},"name":{"type":["string","null"],"default":"root"},"operational_mode":{"type":["string","null"],"enum":["production","integration"],"default":"production"},"request":{"type":["object","null"],"properties":{"custom_actions":{"type":["array","null"],"items":{"type":"object","properties":{"add_header":{"allOf":[{"$ref":"#/definitions/SimpleHeaderActionDto-nullable"},true]},"add_missing_header":{"allOf":[{"$ref":"#/definitions/SimpleHeaderActionDto-nullable"},true]},"add_or_replace_header":{"allOf":[{"$ref":"#/definitions/SimpleHeaderActionDto-nullable"},true]},"geolocation_redirect":{"type":["object","null"],"properties":{"continent_codes":{"default":"[]","type":["array","null"],"items":{"type":"string","default":"[]"}},"country_codes":{"default":"[]","type":["array","null"],"items":{"type":"string","default":"[]"}},"status_code":{"type":["integer","null"],"default":"303"},"target_url":{"type":["string","null"]}},"additionalProperties":false},"header_redirect":{"type":["object","null"],"properties":{"name":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"status_code":{"type":["integer","null"],"default":"303"},"target_url":{"type":["string","null"]},"value":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]}},"additionalProperties":false},"name":{"type":"string"},"remove_header":{"allOf":[{"$ref":"#/definitions/RemoveHeaderActionDto-nullable"},true]},"rewrite_header_value":{"allOf":[{"$ref":"#/definitions/RewriteHeaderValueDto-nullable"},true]}},"additionalProperties":false}},"default_actions":{"type":["array","null"],"items":{"$ref":"#/definitions/DefaultActionDto"}}},"additionalProperties":false},"response":{"type":["object","null"],"properties":{"custom_actions":{"type":["array","null"],"items":{"type":"object","properties":{"add_header":{"allOf":[{"$ref":"#/definitions/SimpleHeaderActionDto-nullable"},true]},"add_missing_header":{"allOf":[{"$ref":"#/definitions/SimpleHeaderActionDto-nullable"},true]},"add_or_replace_header":{"allOf":[{"$ref":"#/definitions/SimpleHeaderActionDto-nullable"},true]},"name":{"type":"string"},"remove_header":{"allOf":[{"$ref":"#/definitions/RemoveHeaderActionDto-nullable"},true]},"rewrite_cookie":{"type":["object","null"],"properties":{"cookie":{"allOf":[{"$ref":"#/definitions/PatternDto-nullable"},true]},"domain":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]},"domain_replace":{"type":["string","null"]},"http_only_mode":{"type":"string","enum":["auto","keep","remove","add"],"default":"auto"},"path":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]},"path_replace":{"type":["string","null"]},"secure_mode":{"type":"string","enum":["auto","keep","remove","add"],"default":"auto"}},"additionalProperties":false},"rewrite_header_value":{"allOf":[{"$ref":"#/definitions/RewriteHeaderValueDto-nullable"},true]},"rewrite_raw_cookie":{"type":["object","null"],"properties":{"replace":{"type":["string","null"]},"value":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]}},"additionalProperties":false}},"additionalProperties":false}},"default_actions":{"type":["array","null"],"items":{"$ref":"#/definitions/DefaultActionDto"}},"error_page_replacements":{"type":["array","null"],"items":{"type":"object","properties":{"page":{"type":["string","null"]},"status_code":{"allOf":[{"$ref":"#/definitions/SimplePatternDto-nullable"},true]}},"additionalProperties":false}},"rewrites":{"type":["object","null"],"properties":{"any":{"type":"array","items":{"type":"object","properties":{"content":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]},"content_type":{"type":"string","default":"^(?:text|application)/(?:html|xhtml)"},"to":{"type":["string","null"]}},"additionalProperties":false}},"html":{"type":"array","items":{"type":"object","properties":{"options":{"default":"[ url ]","type":"array","items":{"type":"string","enum":["url","event","embedded"],"default":"[ url ]"}},"to":{"type":["string","null"]},"url":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]}},"additionalProperties":false}},"json":{"type":"array","items":{"type":"object","properties":{"content":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]},"path":{"type":"string"},"replace":{"type":"string"}},"additionalProperties":false}},"location_header":{"type":"array","items":{"type":"object","properties":{"to":{"type":["string","null"]},"url":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto-nullable"},true]}},"additionalProperties":false}}},"additionalProperties":false}},"additionalProperties":false},"session_handling":{"type":["string","null"],"enum":["enforce_session","optional_session","optional_session_no_refresh","ignore_session"],"default":"ignore_session"},"threat_handling":{"type":["string","null"],"enum":["terminate_session","block","notify"],"default":"block"},"timeouts":{"type":["object","null"],"properties":{"backend_http_response":{"type":["integer","null"],"default":"120"},"idle_session":{"type":["integer","null"],"default":"0"}},"additionalProperties":false}},"additionalProperties":false}},"virtual_host":{"type":["object","null"],"properties":{"aliases":{"type":"array","items":{"type":"string"}},"auth":{"type":["object","null"],"properties":{"client_certificate":{"type":["object","null"],"properties":{"ca_selection":{"type":["string","null"]},"ca_selection_file":{"type":["string","null"],"default":"/secret/auth/client_certificate/selection.crt"},"ca_validation":{"type":["string","null"]},"ca_validation_file":{"type":["string","null"],"default":"/secret/auth/client_certificate/validation.crt"},"crl":{"type":["string","null"]},"crl_file":{"type":["string","null"],"default":"/secret/auth/client_certificate/client.crl"},"verification":{"type":"string","enum":["off","optional","required"],"default":"off"},"verification_depth":{"type":"integer","default":"1"}},"additionalProperties":false}},"additionalProperties":false},"certificate":{"type":["object","null"],"properties":{"ca_chain":{"type":["string","null"]},"ca_chain_file":{"type":["string","null"],"default":"/secret/tls/frontend-server-ca.crt"},"certificate":{"type":["string","null"]},"certificate_file":{"type":["string","null"],"default":"/secret/tls/frontend-server.crt"},"privatekey":{"type":["string","null"]},"privatekey_file":{"type":["string","null"],"default":"/secret/tls/frontend-server.key"}},"additionalProperties":false},"encoded_slashes":{"type":"boolean","default":"false"},"expert_settings":{"$ref":"#/definitions/ExpertSettingsDto-nullable"},"hostname":{"type":"string","default":"microgateway"},"http2_enabled":{"type":"boolean","default":"true"},"http_enabled":{"type":"boolean","default":"true"},"http_port":{"type":"integer","default":"8080","minimum":1,"maximum":65535},"https_enabled":{"type":"boolean","default":"true"},"https_port":{"type":"integer","default":"8443","minimum":1,"maximum":65535},"name":{"type":"string","default":"microgateway"},"redirects":{"type":["array","null"],"items":{"type":"object","properties":{"dest":{"type":"string","minLength":1,"pattern":"^(http://|https://|ftp://|/)\\S*?$"},"path":{"allOf":[{"$ref":"#/definitions/PatternWithoutInvertDto"},true]},"status_code":{"type":"integer","default":"303","minimum":301,"maximum":308}},"required":["dest","path"],"additionalProperties":false}},"session_cookie_domain":{"type":["string","null"]},"session_cookie_path":{"type":"string","default":"/"},"strict_fqdn":{"type":"boolean","default":"false"}},"additionalProperties":false}},"additionalProperties":false}},"deny_rule_groups":{"type":"array","items":{"type":"object","properties":{"deny_rules":{"type":"array","items":{"type":"object","properties":{"content_type":{"$ref":"#/definitions/PatternDto-nullable"},"header_name":{"$ref":"#/definitions/PatternDto-nullable"},"header_value":{"$ref":"#/definitions/PatternDto-nullable"},"method":{"$ref":"#/definitions/PatternDto-nullable"},"name":{"type":"string","pattern":"^(?![ \\t\\n]*\\(default(.*)\\))[\\s\\S]*"},"parameter_name":{"$ref":"#/definitions/PatternDto-nullable"},"parameter_value":{"$ref":"#/definitions/PatternDto-nullable"},"path":{"$ref":"#/definitions/PatternDto-nullable"},"rule_key":{"type":"string","pattern":"^(?![ \\t\\n]*\\(default(.*)\\))[\\s\\S]*"}},"additionalProperties":false}},"name":{"type":"string","pattern":"^(?![ \\t\\n]*\\(default(.*)\\))[\\s\\S]*"},"rule_group_key":{"type":"string","pattern":"^(?![ \\t\\n]*\\(default(.*)\\))[\\s\\S]*"}},"additionalProperties":false}},"expert_settings":{"$ref":"#/definitions/ExpertSettingsDto-nullable"},"jwks_providers":{"type":["object","null"],"properties":{"local":{"default":"[]","type":"array","items":{"type":"object","properties":{"issuer":{"type":["string","null"]},"jwks":{"type":["string","null"]},"jwks_file":{"type":["string","null"]},"name":{"type":"string"}},"required":["name"],"additionalProperties":false,"default":"[]"}},"refresh_interval":{"type":"integer","default":"86400"},"remote":{"default":"[]","type":"array","items":{"type":"object","properties":{"issuer":{"type":["string","null"]},"name":{"type":"string"},"service_url":{"type":"string"},"tls":{"type":"object","properties":{"cipher_suite":{"type":"string","default":"DEFAULT"},"client":{"type":["object","null"],"properties":{"ca_chain":{"type":["string","null"]},"ca_chain_file":{"type":["string","null"],"default":"/secret/auth/jwks/tls/client/client-ca.crt"},"certificate":{"type":["string","null"]},"certificate_file":{"type":["string","null"],"default":"/secret/auth/jwks/tls/client/client.crt"},"privatekey":{"type":["string","null"]},"privatekey_file":{"type":["string","null"],"default":"/secret/auth/jwks/tls/client/client.key"}},"additionalProperties":false},"force_new_session":{"type":"boolean","default":"false"},"protocol":{"type":"string","enum":["DEFAULT","TLSv1_0","TLSv1_1","TLSv1_2","TLSv1_3"],"default":"DEFAULT"},"server":{"type":["object","null"],"properties":{"ca_validation":{"type":["string","null"]},"ca_validation_file":{"type":["string","null"],"default":"/secret/auth/jwks/tls/server/server-validation.crt"},"host_name_verification":{"type":"boolean","default":"false"}},"additionalProperties":false}},"additionalProperties":false}},"required":["name","service_url"],"additionalProperties":false,"default":"[]"}}},"additionalProperties":false},"license":{"type":["string","null"]},"license_file":{"type":["string","null"],"default":"/secret/license"},"log":{"type":["object","null"],"properties":{"level":{"type":"string","enum":["info","trace"],"default":"info"}},"additionalProperties":false},"metrics":{"type":"object","properties":{"statsd":{"type":"object","properties":{"enabled":{"type":"boolean","default":"true"}},"additionalProperties":false}},"additionalProperties":false},"remote_ip":{"type":["object","null"],"properties":{"header":{"type":"string"},"internal_proxies":{"type":"array","items":{"type":"string"}}},"required":["header","internal_proxies"],"additionalProperties":false},"session":{"type":["object","null"],"properties":{"encryption_passphrase":{"type":["string","null"]},"encryption_passphrase_file":{"type":["string","null"],"default":"/secret/passphrase"},"idle_timeout":{"type":"integer","default":"60"},"lifetime":{"type":"integer","default":"28800"},"redis_hosts":{"default":"[]","type":"array","items":{"type":"string","default":"[]"}},"store_mode":{"type":"string","enum":["server","cluster","disabled"]}},"additionalProperties":false}},"additionalProperties":false}
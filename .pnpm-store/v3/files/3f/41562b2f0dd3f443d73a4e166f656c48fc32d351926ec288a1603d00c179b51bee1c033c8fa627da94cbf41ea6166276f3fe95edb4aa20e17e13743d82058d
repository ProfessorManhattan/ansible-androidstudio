{"$schema":"http://json-schema.org/draft-07/schema#","title":"CodeShip Pro steps configuration","definitions":{"ExternalStep":{"title":"CodeShip Pro Step","properties":{"name":{"type":"string"},"type":{"type":"string","enum":[null,"run","serial","push","parallel","load","manual"]},"tag":{"type":"string"},"exclude":{"type":"string"},"service":{"type":"string"},"services":{"items":{"type":"string"},"type":"array"},"command":{"type":"string"},"steps":{"items":{"$ref":"#/definitions/ExternalStep"},"type":"array"},"image_name":{"type":"string"},"image_tag":{"default":"latest","type":"string"},"registry":{"type":"string"},"encrypted_dockercfg_path":{"type":"string"},"dockercfg_service":{"type":"string"},"on_fail":{"items":{"$ref":"#/definitions/ExternalStep"},"type":"array"}},"if":{"properties":{"type":{"anyOf":[{"const":"run"},{"type":"null"}]}}},"then":{"properties":{"steps":{"type":"null"},"image_name":{"type":"null"},"image_tag":{"type":"null"},"registry":{"type":"null"}},"required":["command"]},"else":{"if":{"properties":{"type":{"const":"push"}}},"then":{"properties":{"command":{"type":"null"},"steps":{"type":"null"}},"required":["image_name","registry"]},"else":{"if":{"properties":{"type":{"anyOf":[{"const":"serial"},{"const":"parallel"},{"const":"manual"}]}}},"then":{"properties":{"command":{"type":"null"},"image_name":{"type":"null"},"image_tag":{"type":"null"},"registry":{"type":"null"}},"required":["steps"]}}},"type":"object","additionalProperties":false}},"type":"array","items":{"$ref":"#/definitions/ExternalStep"}}
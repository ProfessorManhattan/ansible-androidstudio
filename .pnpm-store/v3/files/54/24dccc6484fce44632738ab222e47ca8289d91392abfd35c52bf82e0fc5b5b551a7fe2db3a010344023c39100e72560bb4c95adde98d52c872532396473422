{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json.schemastore.org/trunk-yaml","title":"Configuration schema for trunk, a powerful linter runner - https://docs.trunk.io","type":"object","definitions":{"template_string":{"type":"string"},"filetype_list":{"type":"array","items":{"type":"string","enum":["ALL","bazel-build","bazel-workspace","c","c++","c++-header","c++-source","c-header","c-source","c/c++","c/c++-source","css","docker","go","html","javascript","json","markdown","proto","python","rust","sass","shell","starlark","terraform","typescript","yaml"]}},"linter_list":{"type":"array","items":{"type":"string","enum":["ALL","actionlint","ansible-lint","autopep8","bandit","black-py","buf-breaking","buf-lint","buildifier","cfnlint","clang-format","clang-tidy","clippy","eslint","flake8","gitleaks","gofmt","golangci-lint","hadolint","isort","markdownlint","mypy","prettier","pylint","rustfmt","semgrep","shellcheck","shfmt","terraform-fmt"]}}},"properties":{"lint":{"type":"object","properties":{"runtimes":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["go","node","python","ruby","rust"]},"download":{"type":"string"},"version":{"type":"string"},"min_system_version":{"type":"string"},"environment":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"},"list":{"type":"array","items":{"type":"string"}}}}}}}},"linters":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string","enum":["pass_fail","lsp_json"]},"command":{"type":"array","items":{"$ref":"#/definitions/template_string","examples":["\"${path}\" will expand to $PATH","\"${home}\" will expand to $HOME","\"${linter}\" will expand to the directory a linter is installed into, e.g. \"${linter}/node_modules/.bin\" is appended to the `PATH` of any linter with `runtime: node`","\"${runtime}\" will expand to the directory a runtime is installed into, e.g. with `runtime: node`, \"${runtime}/bin/npm\" will yield the path to the installed NPM binary","\"${linter}\" will expand to the directory a linter is installed into, e.g. \"${linter}/node_modules/.bin\" is appended to the `PATH` of any linter with `runtime: node`","\"${runtime}\" will expand to the directory a runtime is installed into, e.g. with `runtime: node`, \"${runtime}/bin/npm\" will yield the path to the installed NPM binary"]}},"success_codes":{"type":"array","items":{"type":"integer"}},"error_codes":{"type":"array","items":{"type":"integer"}},"files":{"$ref":"#/definitions/filetype_list"},"include_lfs":{"type":"boolean"},"stdin":{"type":"boolean"},"environment":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"$ref":"#/definitions/template_string","examples":["\"${path}\" will expand to $PATH","\"${home}\" will expand to $HOME","\"${linter}\" will expand to the directory a linter is installed into, e.g. \"${linter}/node_modules/.bin\" is appended to the `PATH` of any linter with `runtime: node`","\"${runtime}\" will expand to the directory a runtime is installed into, e.g. with `runtime: node`, \"${runtime}/bin/npm\" will yield the path to the installed NPM binary"]},"list":{"type":"array","items":{"$ref":"#/definitions/template_string","examples":["\"${path}\" will expand to $PATH","\"${home}\" will expand to $HOME","\"${linter}\" will expand to the directory a linter is installed into, e.g. \"${linter}/node_modules/.bin\" is appended to the `PATH` of any linter with `runtime: node`","\"${runtime}\" will expand to the directory a runtime is installed into, e.g. with `runtime: node`, \"${runtime}/bin/npm\" will yield the path to the installed NPM binary"]}}},"oneOf":[{"required":["name","value"]},{"required":["name","list"]}]}},"run_linter_from":{"type":"string","enum":["directory","parent_directory","workspace"]},"formatter":{"type":"boolean"},"allow_empty_files":{"type":"boolean"},"runtime":{"type":"string","enum":["go","node","python","ruby","rust"]},"package":{"type":"string"},"extra_packages":{"type":"array","items":{"type":"string"}},"download":{"type":"string"}},"dependencies":{"download":{"not":{"required":["runtime"]}},"runtime":{"not":{"required":["download"]}},"package":["runtime"]}}},"enabled":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","examples":["gofmt@1.16.7","pylint@2.8.1","shellcheck@0.7.2"]},"packages":{"type":"array","items":{"type":"string","examples":["flake8-bugbear@21.4.3"]}}}}},"ignore":{"type":"array","items":{"type":"object","properties":{"linters":{"$ref":"#/definitions/linter_list"},"paths":{"type":"array","items":{"type":"string"}}}}},"downloads":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"executable":{"type":"boolean"},"downloads":{"type":"array","items":{"type":"object","properties":{"os":{"type":"string","enum":["linux","macos"]},"cpu":{"type":"string","const":"x86_64"},"url":{"type":"string"},"version":{"type":"string"},"strip_components":{"type":"integer"},"sha256":{"type":"string"}}}}}}},"environments":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"environment":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"},"list":{"type":"array","items":{"type":"string"}}}}}}}}}}},"required":["version"]}